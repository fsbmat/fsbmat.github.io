lista_municipios <- c("FLORESTAL", "LAJINHA", "VIÃ‡OSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
dados_municipio <- pb_poligonos_rgdal[indice_numerico, ];
plot( dados_municipio, axes=TRUE, border="darkgrey", main="Poligonos dos municipios selecionados" );
lista_municipios <- c("FLORESTAL", "LAJINHA", "VICOSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
mapaUF
print( pb_dados[800:853, 1:2] );
pb_dados
pb_dados$NM_MUNICIP
pb_dados$[844]
pb_dados$[:844]
pb_dados[:844]
pb_dados[844:2]
pb_dados$NM_MUNICIP[1:1]
pb_dados$NM_MUNICIP[844:1]
pb_dados$NM_MUNICIP[844,1]
pb_dados$NM_MUNICIP[844]
pb_dados$NM_MUNICIP[845]
pb_dados$NM_MUNICIP[843]
pb_dados$NM_MUNICIP[843]<-"VIÇOSA"
pb_dados$NM_MUNICIP[843]
print( pb_dados[800:853, 1:2] );
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[800:853, 1:2] );
pb_dados$NM_MUNICIP[843]<-"VIÇOSA"
lista_municipios <- c("FLORESTAL", "LAJINHA", "VIÇOSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
dados_municipio <- pb_poligonos_rgdal[indice_numerico, ];
plot( dados_municipio, axes=TRUE, border="darkgrey", main="Poligonos dos municipios selecionados" );
plot( pb_poligonos_rgdal, axes=TRUE, border="darkgrey", main="Mapa de municipios do Estado de Minas Gerais \n com os municipios selecionados em destaque" );
plot( dados_municipio, border="darkgray", col="red", add=TRUE );
plot( dados_municipio, axes=TRUE, border="darkgrey", main="Poligonos dos municipios selecionados" );
knitr::opts_chunk$set(echo = TRUE)
setwd("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG")
#require(maptools)
library("rgdal");
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[800:853, 1:2] );
pb_dados$NM_MUNICIP[843]<-"VIÇOSA"
lista_municipios <- c("FLORESTAL", "LAJINHA", "VIÇOSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
dados_municipio <- pb_poligonos_rgdal[indice_numerico, ];
plot( dados_municipio, axes=TRUE, border="darkgrey", main="Poligonos dos municipios selecionados" );
#plot( pb_poligonos_rgdal, axes=TRUE, border="darkgrey", main="Mapa de municipios do Estado de Minas Gerais \n com os municipios selecionados em destaque" );
#plot( dados_municipio, border="darkgray", col="red", add=TRUE );
graphics.off()
dev.off()
rm(list=ls())
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[800:853, 1:2] );
print( pb_dados[800:853, 1:2] );
setwd("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG")
#require(maptools)
library("rgdal");
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[800:853, 1:2] );
pb_dados$NM_MUNICIP[843]<-"VIÇOSA"
lista_municipios <- c("FLORESTAL", "LAJINHA", "VIÇOSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[800:853, 1:2] );
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[850:853, 1:2] );
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[840:853, 1:2] );
pb_dados$NM_MUNICIP[843]<-"VIÇOSA"
lista_municipios <- c("FLORESTAL", "LAJINHA", "VIÇOSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
dados_municipio <- pb_poligonos_rgdal[indice_numerico, ];
plot( dados_municipio, axes=TRUE, border="darkgrey", main="Poligonos dos municipios selecionados" );
plot( pb_poligonos_rgdal, axes=TRUE, border="darkgrey", main="Mapa de municipios do Estado de Minas Gerais \n com os municipios selecionados em destaque" );
plot( dados_municipio, border="darkgray", col="red", add=TRUE );
plot( pb_poligonos_rgdal, axes=TRUE, border="darkgrey", main="Mapa de municipios do Estado de Minas Gerais \n com os municipios selecionados em destaque" );
plot( dados_municipio, border="darkgray", col="red", add=TRUE );
indice_numerico$2
indice_numerico[2]
mun_florestal <- pb_poligonos_rgdal[indice_numerico[1], ];
plot( mun_florestal, axes=TRUE, border="darkgrey", main="Poligonos dos municipios selecionados" );
mun_florestal <- pb_poligonos_rgdal[indice_numerico[1], ];
plot( mun_florestal, axes=TRUE, border="darkgrey", main="Poligonos dos municipios selecionados" );
mun_florestal <- pb_poligonos_rgdal[indice_numerico[1], ];
plot(mun_florestal, axes=TRUE, border="darkgrey", main= "Poligono de Florestal" );
mapaUF = readShapePoly("31MUE250GC_SIR.shp")
plot(mapaUF)
rm(list=ls())
graphics.off()
library(ggmap)
mapImageData1 <- get_map(location = c(lon = -44.4321, lat = -19.8866),
color = "color",
source = "google",
maptype = "satellite",
zoom = 14)
ggmap(mapImageData1,
extent = "device",
ylab = "Latitude",
xlab = "Longitude")
graphics.off()
dev.off()
setwd("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG")
library("rgdal");
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[800:853, 1:2] );
pb_dados$NM_MUNICIP[843]<-"VIÇOSA"
lista_municipios <- c("FLORESTAL", "LAJINHA", "VIÇOSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
dados_municipio <- pb_poligonos_rgdal[indice_numerico, ];
mun_florestal <- pb_poligonos_rgdal[indice_numerico[1], ];
mun_florestal
pb_dados <- slot(object=mun_florestal, name="coords");
pb_dados <- slot(object=pb_poligonos_rgdal[indice_numerico[1], ], name="coords");
pb_dados2 <- slot(object=pb_poligonos_rgdal, name="coords");
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
pb_dados <- slot(object=pb_poligonos_rgdal, name="coords");
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
pb_dados
mun_florestal
pb_dados3 <- slot(object=pb_poligonos_rgdal, name="bbox");
pb_dados3
slotNames(mun_florestal)
getSlots(mun_florestal)
mun_florestal$NM_MUNICIP
mun_florestal
mun_florestal
pb_poligonos_rgdal[indice_numerico[1], ];
BaltimoreMap <- BaltimoreMap + geom_polygon(aes(x=long, y=lat, group=group), fill='grey', size=.2,color='green', data=Neighborhoods, alpha=0)
library(ggplot2)
BaltimoreMap <- BaltimoreMap + geom_polygon(aes(x=long, y=lat, group=group), fill='grey', size=.2,color='green', data=Neighborhoods, alpha=0)
library(rgdal)
BaltimoreMap <- BaltimoreMap + geom_polygon(aes(x=long, y=lat, group=group), fill='grey', size=.2,color='green', data=Neighborhoods, alpha=0)
Neighborhoods <- readOGR(".","nhood_2010")
library(ggmap)
mapImageData1 <- get_map(location = c(lon = -44.4321, lat = -19.8866),
color = "color",
source = "google",
maptype = "satellite",
zoom = 14)
ggmap(mapImageData1,
extent = "device",
ylab = "Latitude",
xlab = "Longitude")
mun_florestal$lat
library(maptools)
library(rgdal)
library(maps)
library(ggplot2)
ender = 'endereço/ de /trabalho' ## endereço de trabalho
setwd(ender) ## set o endereço de trabalho que receberá os arquivos
ender = "~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"
setwd(ender) ## set o endereço de trabalho que receberá os arquivos
url0  =
'http://www.aesa.pb.gov.br/geoprocessamento/geoportal/arquivos/Estados_do_Nordeste.zip'
if (!file.exists(basename(url0))) download.file(url0,
dest=basename(url0), mode = "wb")
unzip(basename(url0)) ## extrai os arquivos
nordeste <- readOGR(dsn = ender, layer = 'Nordeste', encoding =
"latin1")
nordeste <- readOGR(dsn = ender, layer = 'Nordeste', encoding =
"latin1")
nordeste <- readOGR(dsn = path.expand(ender), layer = 'Nordeste', encoding =
"latin1")
est = data.frame(
nord = c('Alagoas', 'Bahia', 'Paraíba'),
cor = c('red', 'blue', 'orange'),
Temp = c(23, 34, 40))
str(nordeste em data)
est
estados1 = nordeste[nordeste em data[, 4] %in% est$nord, ]
estados2 = subset(nordeste, Estado %in% c('Alagoas', 'Bahia',
'Paraíba'))
est$nord
plot(nordeste, axes = TRUE) ## toda região nordeste
plot(estados2, axes = TRUE) ## alguns estados
map.scale(-48, -18, ratio = FALSE, metric = TRUE, cex = 0.8)
ggplot(estados2, aes(long, lat, group = group)) +
geom_polygon(fill = "white") +
geom_path(col = "#7f7f7f", size = 0.25)
spplot(estados2, zcol = "Estado",
col.regions = rainbow(length(levels(nordeste em data$Estado))),
colorkey = FALSE)## estados selecionados
spplot(nordeste, zcol = "Estado",
col.regions = rainbow(length(levels(nordeste em data$Estado))),
colorkey = TRUE)## todos os estados
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_poligonos_rgdal
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
pb_dados
pb_dados
dados_municipio
dados_municipio
mun_florestal <- pb_poligonos_rgdal[indice_numerico[1], ];
mun_florestal
mun_florestal
mun_florestal[1]
mun_florestal[2]
mun_florestal[5]
mun_florestal[4]
mun_florestal[3]
mun_florestal@polygons
polygons$coords
library(sp)
polygons(mun_florestal)
polygons(mun_florestal)
summary(mun_florestal)
sp::over
over(mun_florestal)
coordinates(mun_florestal)
coordinatevalues(mun_florestal)
mun_florestal
mun_florestal@polygons[[1]]@Polygons[[1]]@coords
mun_florestal@polygons[[1]]@Polygons[[1]]@coords
lat <- mun_florestal@polygons[[1]]@Polygons[[1]]@coords[,1]
lat
lon <- mun_florestal@polygons[[1]]@Polygons[[1]]@coords[,2]
rm(list=ls())
graphics.off()
library(ggmap)
lat <- mun_florestal@polygons[[1]]@Polygons[[1]]@coords[,1]
rm(list=ls())
graphics.off()
library(ggmap)
library("rgdal");
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
lista_municipios <- c("FLORESTAL", "LAJINHA", "VIÇOSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
indice_numerico[1]
mun_florestal <- pb_poligonos_rgdal[indice_numerico[1], ];
lat <- mun_florestal@polygons[[1]]@Polygons[[1]]@coords[,1]
lon <- mun_florestal@polygons[[1]]@Polygons[[1]]@coords[,2]
mapImageData1 <- get_map(location = c(lon, lat),
color = "color",
source = "google",
maptype = "satellite",
zoom = 14)
mapImageData1 <- get_map(location = c(lon = -44.4321, lat = -19.8866),
color = "color",
source = "google",
maptype = "satellite",
zoom = 14)
library(ggplot2)
p <- ggplot() +
geom_polygon(data = plotData, aes(x = long, y = lat, group = group,
fill = percent)) +
geom_polygon(data = county, aes(x = long, y = lat, group = group),
fill = NA, color = "black", size = 0.25) +
coord_map() +
scale_fill_distiller(palette = "Greens", labels = percent,
breaks = pretty_breaks(n = 10)) +
guides(fill = guide_legend(reverse = TRUE))
p <- ggplot() +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group,
fill = percent)) +
geom_polygon(data = county, aes(x = long, y = lat, group = group),
fill = NA, color = "black", size = 0.25) +
coord_map() +
scale_fill_distiller(palette = "Greens", labels = percent,
breaks = pretty_breaks(n = 10)) +
guides(fill = guide_legend(reverse = TRUE))
p <- ggplot() +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group,
fill = percent)) +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group),
fill = NA, color = "black", size = 0.25) +
coord_map() +
scale_fill_distiller(palette = "Greens", labels = percent,
breaks = pretty_breaks(n = 10)) +
guides(fill = guide_legend(reverse = TRUE))
install.packages("scales")
library(scales)
p <- ggplot() +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group,
fill = percent)) +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group),
fill = NA, color = "black", size = 0.25) +
coord_map() +
scale_fill_distiller(palette = "Greens", labels = percent,
breaks = pretty_breaks(n = 10)) +
guides(fill = guide_legend(reverse = TRUE))
library(ggplot)
p <- ggplot2() +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group,
fill = percent)) +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group),
fill = NA, color = "black", size = 0.25) +
coord_map() +
scale_fill_distiller(palette = "Greens", labels = percent,
breaks = pretty_breaks(n = 10)) +
guides(fill = guide_legend(reverse = TRUE))
library(ggplot2)
p <- ggplot2() +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group,
fill = percent)) +
geom_polygon(data = pb_dados, aes(x = long, y = lat, group = group),
fill = NA, color = "black", size = 0.25) +
coord_map() +
scale_fill_distiller(palette = "Greens", labels = percent,
breaks = pretty_breaks(n = 10)) +
guides(fill = guide_legend(reverse = TRUE))
rm(list=ls())
graphics.off()
library(ggmap)
library("rgdal")
library(ggplot2)
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
lista_municipios <- c("FLORESTAL", "LAJINHA", "VIÇOSA");
indice_numerico <- which( pb_dados$NM_MUNICIP %in% lista_municipios );
print(indice_numerico);
indice_numerico[1]
mun_florestal <- pb_poligonos_rgdal[indice_numerico[1], ];
lat <- mun_florestal@polygons[[1]]@Polygons[[1]]@coords[,1]
lon <- mun_florestal@polygons[[1]]@Polygons[[1]]@coords[,2]
mapImageData1 <- get_map(location = c(lon = -44.4321, lat = -19.8866),
color = "color",
source = "google",
maptype = "satellite",
zoom = 14)
ggmap(mapImageData1,
extent = "device",
ylab = "Latitude",
xlab = "Longitude")
mapImageData4 <- get_map(location = c(lon = -44.4321, lat = -19.8866),
color = "color",
source = "google",
maptype = "hybrid",
zoom = 15)
ggmap(mapImageData4,
extent = "device",
ylab = "Latitude",
xlab = "Longitude")
library(sp)
coordinates(mun_florestal)
mapImageData1 <- get_map(location = c(lon = -44.44211, lat = -19.86849),
color = "color",
source = "google",
maptype = "satellite",
zoom = 14)
ggmap(mapImageData1,
extent = "device",
ylab = "Latitude",
xlab = "Longitude")
mapImageData4 <- get_map(location = c(lon = -44.44211, lat = -19.86849),
color = "color",
source = "google",
maptype = "hybrid",
zoom = 15)
ggmap(mapImageData4,
extent = "device",
ylab = "Latitude",
xlab = "Longitude")
mapImageData1 <- get_map(location = c(lon = -44.4321, lat = -19.8866),
color = "color",
source = "google",
maptype = "satellite",
zoom = 14)
ggmap(mapImageData1,
extent = "device",
ylab = "Latitude",
xlab = "Longitude")
mapImageData4 <- get_map(location = c(lon = -44.4321, lat = -19.8866),
color = "color",
source = "google",
maptype = "hybrid",
zoom = 15)
ggmap(mapImageData4,
extent = "device",
ylab = "Latitude",
xlab = "Longitude")
ggmap(mapImageData4,
extent = "panel",
ylab = "Latitude",
xlab = "Longitude")
ggmap(get_map(maptype = "satellite"), extent = "device") +
stat_density2d(aes(x = lon, y = lat, colour = class), data = chkpts, bins = 5)
hdf <- get_map("houston, texas")
ggmap(hdf, extent = "normal")
ggmap(hdf) # extent = "panel", note qmap defaults to extent = "device"
ggmap(hdf, extent = "device")
mu <- c(-95.3632715, 29.7632836); nDataSets <- sample(4:10,1)
chkpts <- NULL
for(k in 1:nDataSets){
a <- rnorm(2); b <- rnorm(2);
si <- 1/3000 * (outer(a,a) + outer(b,b))
chkpts <- rbind(
chkpts,
cbind(MASS::mvrnorm(rpois(1,50), jitter(mu, .01), si), k)
)
}
chkpts <- data.frame(chkpts)
names(chkpts) <- c("lon", "lat","class")
chkpts$class <- factor(chkpts$class)
qplot(lon, lat, data = chkpts, colour = class)
ggmap(hdf, extent = "normal") +
geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)
ggmap(hdf) +
geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)
ggmap(hdf, extent = "device") +
geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)
theme_set(theme_bw())
ggmap(hdf, extent = "device") +
geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)
ggmap(hdf, extent = "device", legend = "topleft") +
geom_point(aes(x = lon, y = lat, colour = class), data = chkpts, alpha = .5)
qmplot(lon, lat, data = chkpts, color = class, darken = .6)
qmplot(lon, lat, data = chkpts, geom = "density2d", color = class, darken = .6)
hdf <- get_map()
mu <- c(-95.3632715, 29.7632836)
points <- data.frame(MASS::mvrnorm(1000, mu = mu, diag(c(.1, .1))))
names(points) <- c("lon", "lat")
points$class <- sample(c("a","b"), 1000, replace = TRUE)
ggmap(hdf) + geom_point(data = points) # maprange built into extent = panel, device
ggmap(hdf) + geom_point(aes(colour = class), data = points)
ggmap(hdf, extent = "normal") + geom_point(data = points)
ggmap(hdf, extent = "normal", maprange = TRUE) + geom_point(data = points)
ggmap(hdf, extent = "normal", maprange = TRUE) +
geom_point(aes(colour = class), data = points) +
theme_nothing(legend = TRUE) + theme(legend.position = "right")
qmplot(lon, lat, data = points, color = class, darken = .4, alpha = I(.6))
qmplot(lon, lat, data = points, color = class, darken = 0,
maptype = "toner-lite"
)
ggmap(get_map(maptype = "satellite"), extent = "device") +
stat_density2d(aes(x = lon, y = lat, colour = class), data = chkpts, bins = 5)
library(grid)
baylor <- get_map("baylor university", zoom = 15, maptype = "satellite")
ggmap(baylor)
(clicks <- clicks <- gglocator(2) )
expand.grid(lon = clicks$lon, lat = clicks$lat)
ggmap(baylor) + theme_bw() +
annotate("segment", x=-97.110, xend=-97.1188, y=31.5450, yend=31.5485,
colour=I("red"), arrow = arrow(length=unit(0.3,"cm")), size = 1.5) +
annotate("rect", xmin=-97.122, ymin=31.5439, xmax=-97.1050, ymax=31.5452,
fill = I("white"), alpha = I(3/4)) +
annotate("text", x=-97.113, y=31.5445, label = "Department of Statistical Science",
colour = I("red"), size = 3.5) +
labs(x = "Longitude", y = "Latitude") + ggtitle("Baylor University")
baylor <- get_map("baylor university", zoom = 16, maptype = "satellite")
ggmap(baylor, extent = "panel") +
annotate("segment", x=-97.1175, xend=-97.1188, y=31.5449, yend=31.5485,
colour=I("red"), arrow = arrow(length=unit(0.4,"cm")), size = 1.5) +
annotate("rect", xmin=-97.122, ymin=31.5441, xmax=-97.113, ymax=31.5449,
fill = I("white"), alpha = I(3/4)) +
annotate("text", x=-97.1175, y=31.5445, label = "Department of Statistical Science",
colour = I("red"), size = 4)
data(zips)
ggmap(get_map(maptype = "satellite", zoom = 8), extent = "device") +
geom_polygon(aes(x = lon, y = lat, group = plotOrder),
data = zips, colour = NA, fill = "red", alpha = .2) +
geom_path(aes(x = lon, y = lat, group = plotOrder),
data = zips, colour = "white", alpha = .4, size = .4)
library(plyr)
zipsLabels <- ddply(zips, .(zip), function(df){
df[1,c("area", "perimeter", "zip", "lonCent", "latCent")]
})
ggmap(get_map(maptype = "satellite", zoom = 9),
extent = "device", legend = "none", darken = .5) +
geom_text(aes(x = lonCent, y = latCent, label = zip, size = area),
data = zipsLabels, colour = I("red")) +
scale_size(range = c(1.5,6))
setwd("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/Shapefiles")
knitr::opts_chunk$set(echo = TRUE)
ender = "~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/Shapefiles"
setwd(ender)
url0  =
'ftp://geoftp.ibge.gov.br/organizacao_do_territorio/malhas_territoriais/malhas_municipais/municipio_2015/UFs/MG/MG.zip'
if (!file.exists(basename(url0))) download.file(url0, dest=basename(url0), mode = "wb")
unzip(basename(url0)) ##
setwd("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/Shapefiles")
if (!file.exists(basename(url0))) download.file(url0, dest=basename(url0), mode = "wb")
unzip(basename(url0)) ##
library("rgdal");
pb_poligonos_rgdal <- readOGR(dsn=path.expand("ender"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
##-------------------------------------------
##   OBTENDO E DESCOMPACTANDO O SHAPEFILE
##-------------------------------------------
ender = "~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/Shapefiles"
## endereço de trabalho
setwd(ender) ## set o endereço de trabalho que receberá os arquivos
## site do shapefile
url0  =
'ftp://geoftp.ibge.gov.br/organizacao_do_territorio/malhas_territoriais/malhas_municipais/municipio_2015/UFs/MG/MG.zip'
## faz o download do shapefile
if (!file.exists(basename(url0))) download.file(url0, dest=basename(url0), mode = "wb")
unzip(basename(url0)) ## extrai os arquivos
library("rgdal");
pb_poligonos_rgdal <- readOGR(dsn=path.expand("ender"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
ender <- "~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/Shapefiles/MG"
setwd(ender) ## set o endereço de trabalho que receberá os arquivos
pb_poligonos_rgdal <- readOGR(dsn=path.expand("ender"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_poligonos_rgdal <- readOGR(dsn=path.expand("~/GitHub/webpage/fsbmat.github.io/blog_posts/28-01-2017/MG"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_poligonos_rgdal <- readOGR(dsn=path.expand("ender"), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
pb_poligonos_rgdal <- readOGR(dsn=path.expand(ender), layer="31MUE250GC_SIR", verbose=FALSE, stringsAsFactors=FALSE);
Mun = data.frame(
nord = c('Florestal', 'Lajinha', 'Viçosa'),
cor = c('red', 'blue', 'orange'),
Temp = c(23, 34, 40))
pb_dados <- slot(object=pb_poligonos_rgdal, name="data");
print( pb_dados[840:853, 1:2] );
